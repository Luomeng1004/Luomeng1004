<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Apache Jackrabbit</title>
    <url>/2022/05/19/Apache-Jackrabbit/</url>
    <content><![CDATA[<h2 id="Apache-Jackrabbit"><a href="#Apache-Jackrabbit" class="headerlink" title="Apache Jackrabbit"></a>Apache Jackrabbit</h2><h3 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h3><h4 id="仓库配置"><a href="#仓库配置" class="headerlink" title="仓库配置"></a>仓库配置</h4><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">Repository</span></span></span><br><span class="line"><span class="meta">	  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//The Apache Software Foundation//DTD Jackrabbit 1.5//EN&quot;</span></span></span><br><span class="line"><span class="meta">	  <span class="string">&quot;http://jackrabbit.apache.org/dtd/repository-1.5.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">Repository</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">FileSystem</span> <span class="attr">...</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Security</span> <span class="attr">...</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Workspaces</span> <span class="attr">...</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Workspace</span> <span class="attr">...</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Versioning</span> <span class="attr">...</span>/&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">SearchIndex</span> <span class="attr">...</span>/&gt;</span>  <span class="comment">&lt;!-- optional --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">Cluster</span> <span class="attr">...</span>/&gt;</span>	  <span class="comment">&lt;!-- optional, available since 1.2 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">DataStore</span> <span class="attr">...</span>/&gt;</span>	  <span class="comment">&lt;!-- optional, available since 1.4 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">Repository</span>&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><a href="https://jackrabbit.apache.org/jcr/jackrabbit-configuration.html#file-system-configuration">FileSystem</a>: 存储库用来存储注册名称空间和节点类型等内容的虚拟文件系统</li>
<li><a href="https://jackrabbit.apache.org/jcr/jackrabbit-configuration.html#security-configuration">Security</a>: 认证授权配置</li>
<li><a href="https://jackrabbit.apache.org/jcr/jackrabbit-configuration.html#workspace-configuration">Workspaces</a>: 配置工作空间的管理位置和方式</li>
<li><a href="https://jackrabbit.apache.org/jcr/jackrabbit-configuration.html#workspace-configuration">Workspace</a>: 默认工作区配置模板</li>
<li><a href="https://jackrabbit.apache.org/jcr/jackrabbit-configuration.html#versioning-configuration">Versioning</a>: 存储库范围的版本存储的配置</li>
<li><a href="https://jackrabbit.apache.org/jcr/jackrabbit-configuration.html#search-configuration">SearchIndex</a>: 覆盖存储库范围的搜索索引的配置 &#x2F;jcr:system 内容树</li>
<li><a href="https://jackrabbit.apache.org/jcr/jackrabbit-configuration.html#cluster-configuration">Cluster</a>: 集群配置</li>
<li><a href="https://jackrabbit.apache.org/jcr/jackrabbit-configuration.html#data-store-configuration">DataStore</a>: 数据存储配置</li>
</ul>
<h4 id="配置中的变量"><a href="#配置中的变量" class="headerlink" title="配置中的变量"></a>配置中的变量</h4><ul>
<li><code>$&#123;rep.home&#125;</code>: Repository home directory.</li>
<li><code>$&#123;wsp.name&#125;</code>: Workspace name. Only available in workspace configuration.</li>
<li><code>$&#123;wsp.home&#125;</code>: Workspace home directory. Only available in workspace configuration.</li>
</ul>
]]></content>
      <tags>
        <tag>数据库</tag>
      </tags>
  </entry>
  <entry>
    <title>Java成长之路</title>
    <url>/2022/05/20/Java%E6%88%90%E9%95%BF%E4%B9%8B%E8%B7%AF/</url>
    <content><![CDATA[<h1 id="Java成长之路"><a href="#Java成长之路" class="headerlink" title="Java成长之路"></a>Java成长之路</h1><blockquote>
<p>闲时之路，忙时有书，阅读丈量世界，一章一篇总关情。</p>
</blockquote>
<span id="more"></span>



<h2 id="一、Java"><a href="#一、Java" class="headerlink" title="一、Java"></a>一、Java</h2><h3 id="1-连引用都答不上，凭什么说你是Java服务端开发"><a href="#1-连引用都答不上，凭什么说你是Java服务端开发" class="headerlink" title="1.连引用都答不上，凭什么说你是Java服务端开发"></a>1.连引用都答不上，凭什么说你是Java服务端开发</h3><p><strong>【划重点】在Java中引用包括：</strong></p>
<ul>
<li>FinalReference 强引用</li>
<li>SoftReference 软引用</li>
<li>WeakReference 弱引用</li>
<li>PhantomReference 虚引用</li>
</ul>
<p>那么为什么会提供这四种引用呢，主要原因有：</p>
<ul>
<li>方便Jvm进行垃圾回收</li>
<li>方便开发人员使用，开发人员可以灵活的决定某些对象的生命周期</li>
</ul>
<h4 id="FinalReference-强引用"><a href="#FinalReference-强引用" class="headerlink" title="FinalReference 强引用"></a>FinalReference 强引用</h4><p>类似于 Object o &#x3D; new Object() 这类的引用，创建一个对象后，该引用会被保存在JVM栈中，而且只要强引用存在，垃圾回收器就不会回收掉被引用的对象。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Object</span>();</span><br></pre></td></tr></table></figure>



<h4 id="SoftReference-软引用"><a href="#SoftReference-软引用" class="headerlink" title="SoftReference 软引用"></a>SoftReference 软引用</h4><p>软引用关联的对象，在内存不够的情况下，会把这些软引用关联的对象列入垃圾回收范围中，然后进行回收，也就是说软引用并非是完全安全的，在内存不够的情况下是会被垃圾回收器回收掉的。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SoftReferenceDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">5</span>;</span><br><span class="line">        SoftReference[] softReferences = <span class="keyword">new</span> <span class="title class_">SoftReference</span>[count];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            softReferences[i] = <span class="keyword">new</span> <span class="title class_">SoftReference</span>&lt;TestObject&gt;(<span class="keyword">new</span> <span class="title class_">TestObject</span>(<span class="string">&quot;TestObject-&quot;</span> + i));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">            <span class="type">Object</span> <span class="variable">o</span> <span class="operator">=</span> softReferences[i].get();</span><br><span class="line">            <span class="keyword">if</span> (o == <span class="literal">null</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;null&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(((TestObject) o).name);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">TestObject</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">byte</span>[] values;</span><br><span class="line">    <span class="keyword">public</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TestObject</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        values = <span class="keyword">new</span> <span class="title class_">byte</span>[<span class="number">1024</span> * <span class="number">1024</span> * <span class="number">500</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通过注释便可以知道，我这里实例化了多个大对象，然后放入softReferences数组中，之后便遍历打印出其中的对象的命名，打印结果如下:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">null</span><br><span class="line">null</span><br><span class="line">null</span><br><span class="line">TestObject-3</span><br><span class="line">TestObject-4</span><br></pre></td></tr></table></figure>

<p>可以通过结果看出，前面四个对象因为内存不够而被垃圾回收器回收了。</p>
<p><strong>日常使用</strong></p>
<p>在我司的项目中，部分是使用软引用来保存从数据库中取出的数据，具体是做了一个中间层的封装，该中间层的作用就是在get出数据的时候会去判断数据是否为null，如果是为null再次从数据库读取，读取后再放入软引用的集合中，这样的做法是可以避免内存溢出。</p>
<h4 id="WeakReference-弱引用"><a href="#WeakReference-弱引用" class="headerlink" title="WeakReference 弱引用"></a>WeakReference 弱引用</h4><p>弱引用比软引用更弱，被弱引用关联的对象只能存活到发生下一次垃圾回收之前，也就是说当发生GC时，无论当前内存是否足够，都会被回收掉。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WeakReferenceDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        WeakReference&lt;String&gt; stringWeakReference = <span class="keyword">new</span> <span class="title class_">WeakReference</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;I am here!&quot;</span>));</span><br><span class="line">        System.out.println(stringWeakReference.get());</span><br><span class="line"></span><br><span class="line">        System.gc();</span><br><span class="line"></span><br><span class="line">        System.out.println(stringWeakReference.get());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>代码很简短，就是先构建一个弱引用对象，然后在gc前先打印出来证明它存在过，之后手动调用gc，再次打印，可以看出已经没了。运行结果如下</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">I am here!</span><br><span class="line">null</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>

<h4 id="PhantomReference-虚引用"><a href="#PhantomReference-虚引用" class="headerlink" title="PhantomReference 虚引用"></a>PhantomReference 虚引用</h4><p>虚引用和上面不同的地方在于，一个对象是否有虚引用的存在，完全不会对其生存时间构成如何影响，并且也无法通过虚引用来获取一个对象的实例，也就是说跟没有引用与之关联一样，在任何时候都可能被垃圾回收器回收。</p>
<p>那么这样就很容易产生疑问了，虚引用的作用又是什么呢？</p>
<p>作用就是能在这个对象被收集器回收时收到一个系统通知，实现追踪垃圾收集器的回收动作，比如在对象被回收的时候，会调用该对象的finalize方法。</p>
<p>在给出相关demo前，要先介绍一个</p>
<p><strong>ReferenceQueue 引用队列</strong></p>
<p>ReferenceQueue 引用其实也可以归纳为引用中的一员，可以和上述三种引用类型组合使用【软引用、弱引用、虚引用】。</p>
<p>那么它有何作呢？</p>
<p>在创建Reference时，手动将Queue注册到Reference中，而当该Reference所引用的对象被垃圾收集器回收时，JVM会将该Reference放到该队列中，而我们便可以对该队列做些其他业务，相当于一种通知机制。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">PhantomReferenceDemo</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">ReferenceQueue</span> <span class="variable">referenceQueue</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReferenceQueue</span>();</span><br><span class="line"></span><br><span class="line">        PhantomReference&lt;Object&gt; phantomReference = <span class="keyword">new</span> <span class="title class_">PhantomReference</span>&lt;&gt;(<span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;I am here&quot;</span>), referenceQueue);</span><br><span class="line">        System.out.println(<span class="string">&quot;phantomReference.get():&quot;</span> + phantomReference.get());</span><br><span class="line"></span><br><span class="line">        System.gc();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Reference&lt;?&gt; reference;</span><br><span class="line">        <span class="keyword">while</span> ((reference = referenceQueue.poll()) != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">if</span> (reference == phantomReference) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;被回收了...&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>插曲：IDEA打印GC日志的方法，在vm选项中添加<code>-XX:+PrintGCDetails</code></p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">phantomReference.get():null</span><br><span class="line">被回收了...</span><br><span class="line"></span><br><span class="line">Process finished with exit code 0</span><br></pre></td></tr></table></figure>

<p>我们可以从结果中看到先是从引用中get出来的对象为null，证明上面说的无法通过虚引用来获取一个对象的实例，并且在回收后会被放入队列中。</p>
<h4 id="和Reference相关的概念"><a href="#和Reference相关的概念" class="headerlink" title="和Reference相关的概念"></a>和Reference相关的概念</h4><p>首先为了方便JVM进行管理，Reference是有状态的，可以分为以下四种状态</p>
<ul>
<li>active  一般来说内存一开始被分配的状态，而当被引用的对象的可达性发生变化后gc就会将引用放入pending队列并将其状态改为pending状态。</li>
<li>pending 指的是准备要被放进pending队列的对象。</li>
<li>enqueue 指的是对象的内存已经被回收了。</li>
<li>inactive 这是最终的状态，不能再变为其它状态。</li>
</ul>
<h4 id="JVM怎么知道引用在不在"><a href="#JVM怎么知道引用在不在" class="headerlink" title="JVM怎么知道引用在不在"></a>JVM怎么知道引用在不在</h4><p>关于JVM怎么知道引用在不在，这就涉及到了JVM的可达性分析算法了 JVM的可达性分析算法的简单思路就是通过一系列GC Roots作为出发点，向下搜索，搜索所走过的路径称为引用链，当一个对象到GC Roots没有任何引用链，即表明从GC Roots到这个对象不可达时，证明此对象不可用，可被回收。如下图所示</p>
<p>哪些对象可以作为GC Roots呢? 这里给出几个，如下:</p>
<ul>
<li>虚拟机栈中引用的对象</li>
<li>方法区中类静态属性引用的对象</li>
<li>方法区中常量引用的对象</li>
<li>本地方法栈JNI引用的对象</li>
</ul>
<p>具体的想要深入研究的可以自行百度&amp;谷歌，或者等我后面深入分析。</p>
<h4 id="最后的最后"><a href="#最后的最后" class="headerlink" title="最后的最后"></a>最后的最后</h4><p>该篇文章基本解答了【谈谈对Java中几种引用的理解】，如果想要更深入的研究，就要从源码入手了解了。 下次遇见这种面试题，基本上就不慌了，因为实际上只要认真看完该篇文章并且记住几个关键的地方，基本上就不会被面试官问倒了，并且该篇文章后面也解答了【JVM怎么知道引用在不在】和【哪些对象可以作为GC Roots】的问题。</p>
<h2 id="二、Golang"><a href="#二、Golang" class="headerlink" title="二、Golang"></a>二、Golang</h2><h2 id="三、网络"><a href="#三、网络" class="headerlink" title="三、网络"></a>三、网络</h2><h3 id="3-1-网络协议"><a href="#3-1-网络协议" class="headerlink" title="3.1 网络协议"></a>3.1 网络协议</h3><ul>
<li><p>请详细描述三次握手和四次挥手的过程</p>
<p>要求熟悉三次握手和四次挥手的机制，要求画出状态图。</p>
</li>
<li><p>四次挥手中TIME_WAIT状态存在的目的是什么?</p>
<p>这个问题是画出四次挥手状态图，会引申问你。不排除还会问为什么四次挥手是四次不是二次等问题。最好是把相关问题均掌握。</p>
</li>
<li><p>TCP是通过什么机制保障可靠性的?</p>
<p>从四个方面进行回答，ACK确认机制、超时重传、滑动窗口以及流量控制，深入的话要求详细讲出流量控制的机制。</p>
</li>
</ul>
<h2 id="四、操作系统"><a href="#四、操作系统" class="headerlink" title="四、操作系统"></a>四、操作系统</h2><h2 id="五、数据结构与算法"><a href="#五、数据结构与算法" class="headerlink" title="五、数据结构与算法"></a>五、数据结构与算法</h2><h2 id="六、数据库"><a href="#六、数据库" class="headerlink" title="六、数据库"></a>六、数据库</h2><h2 id="七、系统设计"><a href="#七、系统设计" class="headerlink" title="七、系统设计"></a>七、系统设计</h2><h2 id="八、工具"><a href="#八、工具" class="headerlink" title="八、工具"></a>八、工具</h2><h2 id="九、资料"><a href="#九、资料" class="headerlink" title="九、资料"></a>九、资料</h2><h2 id="十、编码实践"><a href="#十、编码实践" class="headerlink" title="十、编码实践"></a>十、编码实践</h2>]]></content>
      <tags>
        <tag>后端技术</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/2022/05/20/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<span id="more"></span>


<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
      <categories>
        <category>测试</category>
      </categories>
  </entry>
  <entry>
    <title>post title with whitespace</title>
    <url>/2022/05/19/post-title-with-whitespace/</url>
    <content><![CDATA[]]></content>
  </entry>
  <entry>
    <title>如何搭建数据指标体系</title>
    <url>/2022/05/19/%E5%A6%82%E4%BD%95%E6%90%AD%E5%BB%BA%E6%95%B0%E6%8D%AE%E6%8C%87%E6%A0%87%E4%BD%93%E7%B3%BB/</url>
    <content><![CDATA[<h2 id="如何搭建数据指标体系"><a href="#如何搭建数据指标体系" class="headerlink" title="如何搭建数据指标体系"></a>如何搭建数据指标体系</h2><p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW98NRiaeHp6qP8uv9ibCdmec7e6biad03fK7jGjIibIfj8pklbXyZ62xeJm06U6fR8l8PZiaCFiaz5nAHLqQ/640?wx_fmt=png" alt="图片"></p>
<p>大家好，我是徐尧～</p>
<p>今天徐尧分享的主题是如何搭建数据指标体系，主要分 3 部分：</p>
<p>一是指标体系的作用；</p>
<p>二是如何构建指标体系；</p>
<p>三是指标体系的运用。</p>
<span id="more"></span>



<h3 id="01-指标体系的作用"><a href="#01-指标体系的作用" class="headerlink" title="01 指标体系的作用"></a>01 指标体系的作用</h3><p>1.1</p>
<p><strong>为什么需要数据指标体系</strong></p>
<p>不同行业业务属性不同能收集到的数据也不同，对于核心指标变化原因的理解，每个人的也大不相同，针对核心指标的变化，应该如何回答常见的三个问题呢？</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW98NRiaeHp6qP8uv9ibCdmec7etSDjuuE08DexJalWRnuO38V9TSyA0BTBzpv1NEw1K9nB5syZWxatIA/640?wx_fmt=png" alt="图片"></p>
<p>按照常规的思维，以倒退的方式，通过对数据的诊断和分析的方式解决问题，好处在于可以在当下解决问题，但存在着耗时长，分析颗粒度不够细致，分析有遗漏的弊端。</p>
<p>1.2</p>
<p><strong>数据指标体系对工作有哪些帮助</strong></p>
<p>如果在这个时候我们有很多数据，有指标体系可以参考，那么将有什么作用呢？</p>
<p>首先可以根据业务框架和全链路的流程实现自动拆解指标，然后可以通过指标的变化主动发现问题，最后可以及时监测效果。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW98NRiaeHp6qP8uv9ibCdmec7eBPDBq3mKK1UYr386dgjSeKlBc8RV0vzy2fkXuTTJdu01j1KFVXvx4w/640?wx_fmt=png" alt="图片"></p>
<h3 id="02-如何搭建指标体系"><a href="#02-如何搭建指标体系" class="headerlink" title="02 如何搭建指标体系"></a>02 如何搭建指标体系</h3><p>搭建指标体系的方法是OSM模型。O是Object（目标），是指希望实现的业务目标；S是Stratedy（策略），代表为了达成目标采取的具体行动策略；M是Measure（度量），用来衡量策略是否有效，目标是否达成。大致分为以下四个步骤：</p>
<p>第一步：先确定核心指标（北极星指标）；</p>
<p>第二步：再梳理为了实现该指标，有哪些有关的要素和节点；</p>
<p>第三步：最后写出上述环节对应关注的指标；</p>
<p>第四步：指标宣贯、存档、落地；</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW98NRiaeHp6qP8uv9ibCdmec7e19gNFnMXsn3Yba9wiarnibb5iaQZWuAoBTTqcMELrZzpOic3CjwUz1eRVg/640?wx_fmt=png" alt="图片"></p>
<p>O：确定核心指标： “North Star Metric” 北极星指标，又叫做“OMTM” One metric that matters,唯一重要的指标。</p>
<p>这是全公司上上下下，向着同一个方向前进指标一但确立，就像北极星一样，高高闪耀在天空中，指引着方向。所以他是公司中核心且可以主动影响的指标。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW98NRiaeHp6qP8uv9ibCdmec7eCMmGBgicvIL0B7801VNrxvVSGsjdFUdicdNmvkGH1jnjjTZRVOLrHagw/640?wx_fmt=png" alt="图片"></p>
<p>S：找到核心指标的关键路径：UJM模型</p>
<p>User Journey Map模型，用户旅程地图。是指设计该业务时，必须要梳理的用户（使用者）的生命旅程。换言之：就是拆解用户所处的每一个旅程阶段、了解每个阶段中用户的行为、明确每个阶段中产品的目标、发现各阶段中产品与用户的接触点、最终从接触点里找到产品的痛点和机会点。</p>
<p>S：梳理流程的3大注意事项</p>
<p>1、路径（流程）以有产出的指标为节点</p>
<p>2、路径的起点和中点围绕核心指标展开</p>
<p>3、梳理路径时仅以单一视角展开</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW98NRiaeHp6qP8uv9ibCdmec7ecGPxUVD4icAkNWCaVjzUVyPNz20HuByNe6XWCLJpDcTzia5VSiavCpMqQ/640?wx_fmt=png" alt="图片"></p>
<p>M是确认每个行为下的实际度量（指标），在使用时会加上常用维度。</p>
<p>OMS指标体系通过关键指标可以达到指导策略的作用。</p>
<h3 id="03-指标体系的应用"><a href="#03-指标体系的应用" class="headerlink" title="03 指标体系的应用"></a>03 指标体系的应用</h3><p>指标体系可以通过关键指标结合业务中的各个步骤，不同维度的关键指标切入业务进行追踪和分析，列出关键指标来回答指标为什么变化，与哪些动作有关，并如何解决问题。指标体系可以指导制定产品运营策略，实现精细化运营，最终通过数据和业务共同验证指标体系是否合适与完善。指标体系是一个反复迭代的过程，在这个过程中通过解决业务的实际问题来不断优化。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW98NRiaeHp6qP8uv9ibCdmec7e6enAZicKVulKTcEIEboqPOaibjtxiacZaOwK20YyffE6g6JA7ayic0U1IA/640?wx_fmt=png" alt="图片"></p>
<h2 id="如何用中台思路治理指标——数据指标中心"><a href="#如何用中台思路治理指标——数据指标中心" class="headerlink" title="如何用中台思路治理指标——数据指标中心"></a>如何用中台思路治理指标——数据指标中心</h2><p>在我们日常的数据工作中，指标的重要性毋庸置疑，指标来源于业务的场景化呈现，业务也通过指标来透视出问题，但也正因为如此重要，使用如此频繁，所以导致指标也出现各种混乱、难用、难找等等问题。所以我们必须有一套合理合规的指标治理方法，并将这套方法转化成工具，通过固定流程去约束原本不可控的行为。接下来我们就看看，指标治理的有那些方法论？以及这些方法是如何设计成系统，也就是我们说的——数据指标中心</p>
<h3 id="01-数据指标中心的定位是什么"><a href="#01-数据指标中心的定位是什么" class="headerlink" title="01 数据指标中心的定位是什么"></a>01 数据指标中心的定位是什么</h3><p>数据指标中心是规范化开发指标并对其进行管理维护的系统，将指标的组成部分解耦拆分开来，并在逻辑表中进行规范性的定义，在此基础上，后续可以按照一定规则进行自由拼装，实现自定义指标的功能。</p>
<h3 id="02-数据指标中心应该如何设计"><a href="#02-数据指标中心应该如何设计" class="headerlink" title="02 数据指标中心应该如何设计"></a>02 数据指标中心应该如何设计</h3><p><strong>1、首先定义指标并归集到对应的主题域</strong></p>
<p>指标的本质是量化了的目标，比如常见的例子：</p>
<p>①我们要把用户的盘子做大，那对应的量化指标就是已注册用户数；</p>
<p>②我们要统计今天的销售额，那对应的量化指标就是总支付金额；</p>
<p>③我们要衡量一次活动的效果，那对应的量化指标就是下单率。</p>
<p>从上面的例子我们可以看到，我们比较常用的几个类型的指标就是，存量型指标（已注册用户数）、事务型指标（支付金额）、转化型指标（下单率），其它还有比例型、统计型、排名型等，这些比较不常用，就不在此赘述了。</p>
<p>这些不同类型的指标，分散在我们产品中的不同功能模块中，所以为了更好地规范与管理，我们需要将这些指标也按照主题域的方式归集起来。主题域在“仓库模型中心”进行创建与定义，在这里只需要将对应的指标划归到对应的主题域就行了。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW98O0fX8MaW6ct6XnpMemNmyFV5yk0MwyrYdLkex1YIuYXtugFbiaMccHjWA2uC1MqmW6nmS1G0htRw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>2、然后是拆分原子指标与派生指标</strong></p>
<p>先来看看原子指标跟派生指标这两个概念具体是什么？</p>
<p>①原子指标：是事实表中，某一个字段的统计值（sum、count、max、min、avg），如下单用户数，下单金额等；</p>
<p>②派生指标：是基于原子指标，进行维度组合后产生的指标，如近1天商城下单用户数，本周商城黄金会员下单金额等。</p>
<p>原子指标无业务意义，它只是预定义的代码片段而已。业务中用到的指标基本都是派生指标。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW98O0fX8MaW6ct6XnpMemNmyVYRicKNkeNsEGwTxRC42JwPuYRe5jOc2Lm9NSE5ke3PREWI7I0FgedA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>3、接着定义原子指标与派生指标的生产逻辑</strong></p>
<p>在本章的开头有提到这样一句话：“将指标的组成部分解耦拆分开来，并在逻辑表中进行规范性的定义”，这个解耦跟定义的过程，就是把一个派生指标拆解成原子指标、时间周期、限定维度、聚合粒度，然后再重新拼装，生成新的派生指标的过程：</p>
<p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片"></p>
<p>在上面这个例子中可以这样来理解：</p>
<p>①统计周期是这个原子指标进行统计运算的时间范围，在这里是本周；</p>
<p>②聚合粒度是指标的主体，即按照哪个维度来来进行聚合，这里是黄金会员；</p>
<p>③限定维度是限制原子指标的计算范围，这里限定在商城，即只计算商城相关的数据；</p>
<p>④原子指标则是预定义的某个字段计算规则。在这里是下单金额的累加。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW98O0fX8MaW6ct6XnpMemNmyTJict3iagIQYq6ibDUGBva6889mmbrr9vAibVgRGuZic4oG4nXLJibwp6LCQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>4、最后通过指标管理平台对指标进行规范生产</strong></p>
<p><strong>⑴规范化指标命名</strong></p>
<p>命名规范对于后期大量的指标管理来说非常重要，因为当指标多起来的时候，你要找一个指标经常需要用到检索功能，而检索的前提是你对指标有一些前置的认知。这就需要我们对指标的命名进行规范化。</p>
<p>指标命名规范有三个重点：</p>
<p>①简洁明了，易懂：最好是只要看到指标名，不需要看注释就可以知道它的意思，归属等；</p>
<p>②格式统一：每个指标的格式都是一样的，通过组合不同模块的命名拼凑起来；</p>
<p>③生成统一：原子指标与继承自它的派生指标的规范是一致的。</p>
<p>以商城相关的指标为例：</p>
<p>①所有业务下单跟支付指标，默认以主单为统计口径，不用带“主单”相关字眼，如商城下单次数；当统计口径为“子单”时则需要在命名中标出，如：商城子单下单次数；</p>
<p>②所有与人相关指标默认以“注册用户”为统计实体，不需要带“用户”相关字眼，如访问次数；当统计主体为“游客”时则需要在命名中标出，如：游客访问次数；</p>
<p>③无指定业务范围的指标默认为平台指标，不需要带“平台”相关字眼，如近30天支付人数。如果有限定业务范围，则需要加上业务名称，如：商城-近30天支付人数；</p>
<p>④无指定时间周期的指标默认为“近1天”（但需要保存小时粒度，便于后续下钻），不需要带“时间”相关字眼，如注册人数。如果有限定时间范围，则需要加上时间周期：如：近7天注册人数。</p>
<p>完整的命名的规范为：商城（业务板块）+用户（实体）+近7天（统计周期）+新增（业务动作）+子单（类型）+单日（间隔周期）+平均（统计运算规则）+支付金额（原子指标），如：商城-用户近7天新增子单单日平均支付金额（没有的部位可留空，如：商城-汇总支付金额）。</p>
<p><strong>⑵规范化统计口径</strong></p>
<p>当指标主体为实体（名词）：游客、用户、商品等，则只需定义单位为“人&#x2F;个” 即可。如：游客人数、用户人数、商品个数。</p>
<p>当指标为业务动作（动词）：如点击、支付、下单等，单位除定义为“次数” 外，还需考虑跟这个动作关联的实体的单位，如“商品”时需要定义多一个单位“笔数”；为“用户”时则需要定义多一个“人数”等；所以一个下单动作的指标，会有多个不同的统计口径：下单次数，下单人数，下单笔数，下单金额……</p>
<p>在定义指标名时需要详细列出，避免出现“下单数”这样模糊的指标。</p>
<p><strong>⑶规范化指标等级</strong></p>
<p>我们都知道，随着公司的发展，产品在不断地进行迭代，功能的增删与业务的变化势必也影响着指标的发展，一些旧的指标被不断更新或废弃，而新的指标也不断增加。这时对指标的管理也成了一个问题，哪些指标由谁开发？后续谁来维护……</p>
<p>一个比较好的解决方案就是对指标进行等级划分，可以划分为两个等级：</p>
<p>①一级指标：即原子指标与小部分全平台的核心指标，从各业务部门收集需求后，统一由数据中台来产出，有一套完整规范的开发流程：需求-评审-排期-开发-测试-验收-上线。所有维护管理工作都由中台负责；</p>
<p>②二级指标：即派生指标，由各业务部门自定通过指标中心生成，没有严格的开发流程，各业务部门根据需要自行创建，但需要遵守命名规范。所有维护管理工作由部门内部负责。</p>
<h3 id="03-数据指标中心最终呈现是怎么样"><a href="#03-数据指标中心最终呈现是怎么样" class="headerlink" title="03 数据指标中心最终呈现是怎么样"></a>03 数据指标中心最终呈现是怎么样</h3><p>将我们上述讲的所有方法论，内化到对应的功能，然后把功能集合到一个产品里，就是我们常说的指标管理平台，后续所有的指标申请、新建、更新、下架归档、字典等，都在这个系统里去实现，也就实现了我们指标的收口与规范化开发。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW98O0fX8MaW6ct6XnpMemNmyrPjR3UKtKBYqe0SfFVUrVl62uJvKrMCzoniaXTSsuIJ3Rn678gKoibyg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h2 id="数据中台建设（规划篇）"><a href="#数据中台建设（规划篇）" class="headerlink" title="数据中台建设（规划篇）"></a>数据中台建设（规划篇）</h2><h3 id="一、什么是数据中台"><a href="#一、什么是数据中台" class="headerlink" title="一、什么是数据中台"></a>一、什么是数据中台</h3><h4 id="1-1-数据中台的定义"><a href="#1-1-数据中台的定义" class="headerlink" title="1.1 数据中台的定义"></a>1.1 数据中台的定义</h4><p>数据中台不是数据平台，数据中台是处于业务前台和技术后台的中间层，是对业务提供的数据能力的抽象和共享的过程，</p>
<p>数据中台通过将企业的数据变成数据资产，并提供数据能力组件和运行机制，形成聚合数据接入、集成、清洗加工、建模处理、挖掘分析，并以共享服务的方式将数据提供给业务端使用，从而与业务产生联动，而后结合业务系统的数据生产能力，最终构建数据生产&gt;消费&gt;再生的闭环，通过这样持续使用数据、产生智能、反哺业务从而实现数据变现的系统和机制。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW99UsibflePsaZVse7utvPa5vmosXC7jObNOCLzGXIzWrxt1ia10MnmSLS0hyFWNdADBw7V4PREot3kQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>数据生产&gt;消费&gt;再生闭环图</p>
<h4 id="1-2-为什么要建设数据中台"><a href="#1-2-为什么要建设数据中台" class="headerlink" title="1.2 为什么要建设数据中台"></a>1.2 为什么要建设数据中台</h4><p>数据中台建设的背景跟企业的业务发展阶段和信息技术建设阶段紧密结合，不单单要投入大量的建设人力成本，还有有配套的组织制度、运营团队配合为他保驾护航。所以为什么建设数据中台，希望能达成什么样的目标，对不同企业都来说都是非常重要数据中台建设的起点。行业里，数据中台的主要原因有以下三点：</p>
<p><strong>01 产品矩阵庞大，响应不及时，响应管理混乱</strong></p>
<p>业务发展迅速，产品矩阵庞大，企业数据平台的服务能力有限，响应不及时，同时响应管理混乱，导致数据服务实效延迟，及服务体验较差，影响到业务端数据使用体验和展业效果，有必要进行统一的、模块化、标准化的服务能力管理和输出，实现对业务端的数据需求的精准满足和高效响应。</p>
<p><strong>02 烟囱式建设数据平台，大量源被浪费</strong></p>
<p>由于业务快速发展和缺乏对整个产品矩阵的数据产品体系进行整体规划，就会出现多个业务线烟囱式建设各自的从数据接入&gt;数据集成&gt;数据开发&gt;数据应用&gt;数据治理等阶段的产品，出现大量的重复建设，导致计算、开发人力、运维人力、存储等资源的重复浪费。对于这类现状在告诉发展阶段的企业是常见状态，有必要对整个产品矩阵做整体的数据中台能力的规划，让业务的数据需求在不断增加的情况下，企业的有整套的可复用的数据能力库及配套机制，支持业务正常运转，节省研发成本</p>
<p><strong>03 数据治理的需要</strong></p>
<p>面对业务已经沉淀的大量数据，逐步形成了企业的数据资产。而这些数据资产如何成为可持续使用的，为企业带来价值的数据，需要数据治理进行提升数据质量，比如设计数据质量校验的规则和使用流程，设计数据管控权限，数据如何安全输出及共享的设计等，如何在整体上发挥出数据的协同效应，为业务提供更高价值的数据服务链路，数据中台可以将这些数据能力整合到一起，对业务端提供稳定的持续的服务能力。</p>
<h3 id="二、数据中台的架构"><a href="#二、数据中台的架构" class="headerlink" title="二、数据中台的架构"></a>二、数据中台的架构</h3><p>数据中台建设是个宏大的系统工程，前期的整体架构规划在整个项目中尤其重要，接下来按照数据活动进行分层，分为底层服务、数据接入、数据整合、数据挖掘分析、业务应用、数据服务管理六层，并全程贯穿数据安全管控活动。接下来将分别简单阐述：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW99UsibflePsaZVse7utvPa5vkCQTExnOhPwcZbZ2ffk2RpYAEBxhGykpibvuXdY2I95CedEv7VFXvVw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>数据中台架构图</p>
<p><strong>01 底层服务</strong></p>
<p>底层服务层重点为整个数据中台，从数据接入层到数据安全管控全流程的数据活动，提供统一的数据存储资源、计算引擎、数据处理中间件服务，增强了服务器资源的有效调度和统一管理。</p>
<p><strong>02 数据接入</strong></p>
<p>数据接入层提供统一的数据接入平台，根据数据采集的业务场景，平台提供了数据收集的工具及解决方案，让数据采集》数据传输》数据存储》数据资源管理全链路都可自动化完成，并实现对活动任务的自动化监控。</p>
<p><strong>03 数据整合</strong></p>
<p>数据整合层提供统一数据处理及标签&#x2F;模型开发服务。在整合层的数据需求应当来自企业的数据使用场景对数据进行建模，生成如标签管理、数据仓库这样的服务平台，为企业的数据团队／业务团队使用数据提供一个高效的整合后的数据源。并在这一层对数据进行治理，例如编码规范、主题域划分，表模型规划、数据质量校验规则设计等都在这一层完成，通过这些模型、规范及平台的协同作用，为企业提供可高效获取并质量可靠的数据。</p>
<p><strong>04 数据挖掘分析</strong></p>
<p>数据挖掘分析层整合了企业存在的几大数据挖掘及分析工作场景，比如对用户行为数据进行数据分析、通过算法模型挖掘用户潜在的商业价值、或者多个BU之间进行数据加密碰撞发现新合作场景等，这一层提供的平台及工具，基本覆盖了大部分数据挖掘的工作场景。通过数据中台实现共享这些数据组件，使得各部门和团队都可以通过工具高效完成挖掘分析工作。</p>
<p><strong>05 业务应用</strong></p>
<p>业务应用层是指可以直接提供给业务端使用的数据产品，业务可以直接使用这些数据产品高效获得满足业务需求的目标数据，甚至这些数据可以直接打通到业务系统，比如DMP平台，让用户从产生数据需求&gt;数据加工&gt;数据使用的整个数据获取周期大幅度缩短。此外，也可以通过提满足特定具体业务场景的数据应用来给业务赋能。</p>
<p><strong>06 数据服务管理</strong></p>
<p>数据服务管理层提供统一的数据服务出口，目标在帮助企业提升数据资产的应用价值，同时要保证数据的安全性和有效性。统一服务通过行业成熟的ONESERVICE解决方案，构建API和数据服务接口来满足不同数据使用场景的需要，同时降低了数据的开发门槛。</p>
<h3 id="三、数据中台建设路径"><a href="#三、数据中台建设路径" class="headerlink" title="三、数据中台建设路径"></a>三、数据中台建设路径</h3><p>数据中台的建设路径，跟企业的业务所处的业务阶段有关，亦跟企业所处的信息化建设阶段有关。行业里的数据中台建设路径，总体可以分为以下三类：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW99UsibflePsaZVse7utvPa5v3iaER6K9R2kibhIvxH8JL3QbuX6tUnenTY8QelgxlsiciciaWM5fjUpbKBA/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>数据中台建设路径难度对比图</p>
<h4 id="3-1-路径一：业务中台与数据中台并行建设"><a href="#3-1-路径一：业务中台与数据中台并行建设" class="headerlink" title="3.1 路径一：业务中台与数据中台并行建设"></a>3.1 路径一：业务中台与数据中台并行建设</h4><p>数据中台与业务中台并行建设，复杂度可想而知，也是挑战难度最大的路径。因为建设业务中台的过程需要对业务进行梳理和规划，这个过程会反复出现多次对流程调整，这给数据中台建设带来了非常多的不确定性，这也进一步增加了数据中台建设的难度。</p>
<h4 id="3-2-路径二：-业务中台先行建设，数据中台跟进"><a href="#3-2-路径二：-业务中台先行建设，数据中台跟进" class="headerlink" title="3.2 路径二： 业务中台先行建设，数据中台跟进"></a>3.2 路径二： 业务中台先行建设，数据中台跟进</h4><p>相对比数据中台与业务中台并行的复杂度和挑战度更高，路径二显得更加稳健，也是被企业采用最多的一种路径。</p>
<p>业务中台先行，数据中台跟进。很多企业会采取这种模式。这种模式吸取了第一种模式下的业务不确定给数据中台带来了多种不确定的教训。</p>
<p>在数字化营销成熟发展的今天，其实业务与数据早已不能完全分割。业务数据化和数据业务化几乎是同时完成的。</p>
<h4 id="3-3-路径三：单独建设数据中台"><a href="#3-3-路径三：单独建设数据中台" class="headerlink" title="3.3 路径三：单独建设数据中台"></a>3.3 路径三：单独建设数据中台</h4><p>单建设数据中台等选择一般是在业务系统已经相对稳定时期，但是这种模式下也存在挑战。业务等野蛮生长过程，数据散落在各个系统，数据质量参差不齐。这个阶段进行数据治理，必定是非常繁杂耗时的、产出不明显的工作。同时，涉及各个领域的数据整合及数据能力的规范化，势必会带来组织架构的变革和重组，这是数据中台建设的至关重要环节。如果在上层的政策和资源支持上，不足以有效协调各个领域数据建设者同一目标，齐心协力，那么也很难把数据中台成功建设起来。</p>
<h3 id="四、数据中台的价值"><a href="#四、数据中台的价值" class="headerlink" title="四、数据中台的价值"></a>四、数据中台的价值</h3><p>数据中台建设前期消耗的巨额成本常常给数据中台项目带来价值挑战。</p>
<p>数据中台的建设阶段如同自建房子，房子建设过程都是在消耗成本，房子开始自行入住和出租后，才能真实看到所建新房子的产生的价值。</p>
<p>数据中台的使命是通过全局规划来治理和运营企业的数据资产，让数据使用者能高效的获取可靠有效的数据。</p>
<p>若长期有效的运营这些数据资产，数据能力组件的复用带来的工具研发降本愈发明显；若数据复用到跨部门跨业务线的场景愈发丰富，数据中台对业务端产生的价值也呈指数级增长。</p>
<p>数据中台的价值，我将归类为一下三大点：</p>
<h4 id="4-1-帮助建立数据标准"><a href="#4-1-帮助建立数据标准" class="headerlink" title="4.1 帮助建立数据标准"></a>4.1 帮助建立数据标准</h4><p>在建设数据中台之前，企业一般比较少有全局的数据标准或统一数据规范等，即使有，也因为数据平台的分散状态比较难以落地。</p>
<p>但是数据中台建设会促使企业还要建设数据标准或规范，比如数据接入规范、数据集成规范、数据存储规范、数据处理规范、数据使用权限规范、数据共享规范、数据销毁规范、数据安全规范等。这些标准都是数据中台建设阶段也需要建设的体系。</p>
<p>有数据标准&#x2F;规范体系护航，数据中台才能更好的运转；也只有依托数据中台，数据标准才能更好的执行和落地。<strong>数据中台建设就是一个促使企业建设数据标准&#x2F;规范的好契机。</strong></p>
<h4 id="4-2-赋能业务，实现降本增效"><a href="#4-2-赋能业务，实现降本增效" class="headerlink" title="4.2 赋能业务，实现降本增效"></a>4.2 赋能业务，实现降本增效</h4><p>数据中台的最终价值还是降本增效。无论是建设数据标准，还是复用的数据能力，都是为了帮助赋能业务，企业达成战略目标。下面分别从两个角度去阐述所产生的降本和增效价值。</p>
<p><strong>降本</strong>：数据中台通过复用数据能力组建，快速完成数据链路的搭建，减少重复研发的人力和维护成本；</p>
<p><strong>增效：</strong>通过快速复用组建完成数据链路搭建，让数据从接入》加工》使用的整个周期缩短，减少业务端的数据获取等待时延，为业务方赢得更多的展业时间和机会；</p>
<p>通过提供赋能于具体业务场景的数据应用，帮助业务端更精准的发现客户、分析客户等，用数据滋养各线业务，使整个业务运营过程体验更友好和高效，并缩短运营周期。</p>
<h4 id="4-3-促进数据组织建设"><a href="#4-3-促进数据组织建设" class="headerlink" title="4.3 促进数据组织建设"></a>4.3 促进数据组织建设</h4><p>数据中台承担着一定的实现企业战略目标的使命，数据中台的建设过程势必需要对应的组织和制度来支撑中台的建设和运营。</p>
<p>数据中台这种体系化工程将横向拉通企业数据的相关方，包括中台建设团队、中台运维团队、数据产品经理团队、数据运营团队等，形成企业真正的数据组织，</p>
<h3 id="五、总结"><a href="#五、总结" class="headerlink" title="五、总结"></a>五、总结</h3><p>1、从定义和建设背景来认识数据中台，对中台有了认知性的概念；</p>
<p>2、从数据中台架构角度按分层介绍每一层的数据能力及建设逻辑，对数据中台的服务能力有整体的认知；</p>
<p>3、从数据中台建设的常见路线分析，并分析建设难度及风险，认识根据企业的业务发展现状及数据需求现状，选择合适的数据中台建设路线。</p>
<p>4、数据中台的主要价值有促进数据标准建设，并通过中台落执行数据标准；此外降本增效是数据中台的终极目标；</p>
<p>此处总结！</p>
<p>参考资料：</p>
<p>[1] 陈新宇等，《中台实践》</p>
<h2 id="这样的数据可视化，你造吗？"><a href="#这样的数据可视化，你造吗？" class="headerlink" title="这样的数据可视化，你造吗？"></a>这样的数据可视化，你造吗？</h2><p>俗话说：一图胜千言，这足以说明一张好图的强大作用。汉斯·罗斯林的《TED演讲新数据和震撼的图表》，我看了2遍，着实被这样动态的图表所吸引。换个角度，如果汉斯教授将图表的内容仅仅用口述的形式传达，那么底下的观众是不是都要昏昏欲睡啦。</p>
<p>上一期文章，我重点介绍了数据分析步骤的前4块儿，今天会把数据可视化单独拎为一篇，先带大家温习一下数据分析的步骤，见如下的脑图：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudcFEjkucLbdlaNPGR9HlzDL7znEntNmrzFPepUNkl6yibMlCLYx7KZBw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>自制脑图</strong></p>
<p>对于可视化，你或者周围的朋友是否有如下的认知误区呢？</p>
<p>· 图表的颜色越多越好，甚至超过彩虹色</p>
<p>· 图形越酷炫越好，更能吸引人眼球</p>
<p>· 尽量往一张图表里塞尽可能多的内容</p>
<p>如果你的回答都是no，那么恭喜你对数据可视化有着正确的认知。在我看来，好的图表应该具有它的底层逻辑，那就是用户思维，怎么说？</p>
<p>· 符合人的视觉扫视习惯，图表排版是”Z”或”之”字形，将重要的内容在左上角直接亮明，不需要用户在众多的信息中费力寻找</p>
<p>· 给人以高级感，直白说就是高品质的简洁，比如：字体统一3种以内、用色不宜多可采用3+2组合（3种主角色＋2种配角色）和图表类型相对成系列，而不是将很多图表生搬硬凑</p>
<p>· 给人以传达精确之感，图表元素不宜过多，以免增加用户的认知负荷，要学会断舍离</p>
<p>以上的内容毕竟抽象，那么接下来请允许我用图像化的方式帮助大家理解，如有不同见解，请与我交流，谢谢~<strong>【文末有关于配色的小彩蛋，不要错过哟！】</strong></p>
<ol>
<li>采用图表故事板，即用一组相关的图表来讲述一个复杂的问题，如同连环漫画的方式。下图为优化之后的版本，本例是用来描述【消费者信息表】的男女童基础画像，将性别、年龄和购买力3个维度相结合，因每个点数据量较少，故考虑采用此种方式。</li>
</ol>
<p><strong>优化版：</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudh7U18ibBsMnJp65jLbOcDnb7Y5P2pGwAgs56aJajDZP2YL2wC9uV6tw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>原始版：</strong></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudHqUSzCkDJaY1Gvv6RmcA0aDCX9yCyhqVImQibX0ofWCexHVE8vn2ACA/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>3个相互独立的饼图</p>
<p><strong>对比：</strong></p>
<p>· 原始版采用的饼图在实际应用中应尽量避免使用，原因是人的肉眼很区分出相近比例的差距，比如20%和25%，其次多个饼图占据空间也较大。</p>
<p>· 优化版则可以把同一类别属性放在一起，采用纵向和横向的条形图符合多个类别比较的特征。结论先行，图表在中间，数据来源垫尾，构成一个相对完整的闭环。</p>
<ol start="2">
<li>本例采用<strong>雷达图</strong>，重点说明选择合适的图表同时也可以多进行尝试其他图表，但本例相对不足，因为对比类别就男童和女童2个（可以换条形图），建议雷达图的类别数目在3-5个之间。</li>
</ol>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudMacv0Vd6LfyB5Rma7dm3sXH5hpwm8iaOhCUUfBGAhF2pnfyt19x4sfQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>原始版：</strong>纵向条形图</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudo5ndRRnvbPjaicTXx6Ukxf0MhUlJeXUuP15JksletCel1t5FTeZpkeA/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<ol start="3">
<li>当需要展示<strong>排名</strong>的时候，可以直接采用表格形式，直观明了，如果时间许可的话可以稍作修饰，比如添加代表冠亚季军的图标，让表格更具趣味性。</li>
</ol>
<p>下面的2个版本皆可使用，第一张可视化效果更好一些，弱化了表格的中规中矩。</p>
<p>版本1：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudqbp6tTFaF3CK9k6n1eJaFXic7YHzELeLptWlEgqhqjWjcFZSXpjia0nQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>版本2：</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudfaXQLDEictKknnrZekmruKllHKxrTSAq003wVhUlBSeCWkofgN4nbbg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<ol start="4">
<li>条形图作为常用图表之一，如果类别名称较长，首选横向条形图，且其最大的优势就是符合人的视觉扫视习惯，”Z”形的更好诠释。</li>
</ol>
<p><strong>优化版：</strong>将纵向调整为横向条形图</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudVyUAkYCPenhImDVhYeiclrYKIlJkiaMiaJPNNqT3h3iaNWP4ICsaMJnEZg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p><strong>原始版</strong>：纵向条形图，带有边框</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudu92MXYXCt6jCYojY1N805u3DDVXib4Poic4xqibmlwvHa0Pv1M1Z3oNeg/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<ol start="5">
<li>采用清晰的小而多组图，由爱德华·塔夫特定义，使用相同的变量组合，依照另一个变量的变化，做出的一系列小图表，排列为一行或一列，起到化繁为简的作用。如下图探索2014年的TOP3的季度销量趋势，可采用组图，相较于在一张折线图上呈现3条动荡明显的折线，组图可以更清晰直观看出变化趋势。</li>
</ol>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudI9QGtgP0LJwEJcJJKkzlhPuoBrOvg8nOAjxWNy6StgXM0cs57SvXyw/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>\6. 折线图也作为常用图表之一，多用于时间序列，显示随时间或有序类别而变化的趋势。下图元素精简，图例直接替换为更直观的文本框，因会对显著值进行标示，故纵向坐标轴可省略。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudrgaMEOaMddptFxyQ0X0xXbjpbxohicBYmEcz91jAib8g7R71OtlpDeVg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>最后，让我们欢迎配色小彩蛋上场，舞台交给它吧！</p>
<p>工具：islide插件</p>
<p>第1步：确定需要补间的2个色块(截图中A和B)</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudKc12hZ7ib4gOkLM6OJEH9AdeCziaqgkAN4GqfQqv6Ficrtd0RRVibOWTYQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>第2步：打开islide，选择补间，根据自己的需求填写补间的数量</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnud4vOd709l0FZnMujxsZepcYy34moic444T462W7t1ibS3IsicrAASPVdSw/640?wx_fmt=jpeg&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>第3步：点击应用后，自动生成2个色块间的系列色</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW9ib5cGUbtFUz8roQMKtuZnudic551nYaDqQ2SDqyK9Zoe6aib4libo3KiaLFE0QSJ9Fjica7EVq2Vy1KnKg/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<p>Wow，是不是很神奇，利用补间就可以轻松搞定图表中多个类别系列的颜色，操作非常简单，要不要试一试，来吧！动手吧~</p>
<p>注：上文中提及的【图表故事版】和【小而多组图】参考自《Excel图表之道》，islide的补间方法来源我的朋友分享。</p>
<h2 id="聊一聊-AB-测试平台指标配置"><a href="#聊一聊-AB-测试平台指标配置" class="headerlink" title="聊一聊 AB 测试平台指标配置"></a>聊一聊 AB 测试平台指标配置</h2><p>你是否遇到下面的问题？</p>
<ul>
<li>AB 测试前定好的观察指标需要人工跑数据获取，导致实验周期拉长；</li>
<li>观察的实验指标数据和 BI 上存在差距，需要找数据开发询问口径和统计逻辑，导致沟通成本增大。</li>
</ul>
<p>在上面问题的背景下，今天和大家一起聊下 AB 测试平台的指标配置能力。</p>
<h3 id="1-了解实验指标"><a href="#1-了解实验指标" class="headerlink" title="1.了解实验指标"></a>1.了解实验指标</h3><p>实验指标是指，我们在 AB 测试过程中，定好的用来衡量实验效果的度量。例如下面的点击转化率就是我们定好的一个实验指标。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/jWg3EibnYW9ickOwicFcnFCSibKYYClmmwiaL0ER41rAyCCTqJ8Pmib2ZqIXy3IicQhK5YQnCbcrTc4RichribAcBFWuWtQ/640?wx_fmt=png&wxfrom=5&wx_lazy=1&wx_co=1" alt="图片"></p>
<h4 id="1-2-实验指标的分类"><a href="#1-2-实验指标的分类" class="headerlink" title="1.2 实验指标的分类"></a>1.2 实验指标的分类</h4><p>从以下两个方面可以对实验指标进行分类。</p>
<ul>
<li>类型：</li>
</ul>
<p>比例型实验指标，例如点击转化率、次日留存率、CTR 等；</p>
<p>人均值实验指标，例如人均点击次数、人均下单金额等；</p>
<p>两类指标的差异体现在假设检验时计算样本方差的方式，其中比例型指标是基于伯努利分布近似计算。</p>
<ul>
<li>用途：</li>
</ul>
<p>核心指标，用来决策测试组胜出的直接指标，例如上面表格中通过点击转化率决策，得到实验组 B 胜出；</p>
<p>必看指标，每一个测试需要观察的指标，虽然测试功能可能对其无直接因果关系的影响，但不能对其有显著负向的影响；</p>
<p>除了上面提到的几类指标，偶尔会对比一些绝对值的指标，例如总的点击用户数、总的下单金额。笔者认为只有在进入测试组人数相同的情况下，对比这样的绝对值指标才有意义。否则还是需要转化成比例型或者人均值指标，进行对比。</p>
<h3 id="2-指标配置的必要性"><a href="#2-指标配置的必要性" class="headerlink" title="2 指标配置的必要性"></a>2 指标配置的必要性</h3><p>1、实验结论要快</p>
<p>AB 测试平台指标固化需要研发投入，有一定的人力和时间周期成本。若测试过程中依赖实验指标固化，会延长整个测试周期，最终导致 AB 测试无法快速迭代。</p>
<p>2、实验指标多，无法提前全覆盖</p>
<p>不同的 AB 测试，观察的实验指标不同。例如 UI 测试，会评估目标点击转化率；头条 feed 流测试，会评估人均阅读时长等。</p>
<p>把所有可能的实验指标都固化下来，100% 无法实现。有些指标只会在特定实验观察，固化下来也会存在浪费资源。</p>
<p>基于以上原因，AB 测试平台具备指标配置和管理能力必不可少。一方面提升必看指标固化的生产效率，另一方面对于个性化指标，提供了快速观察的可能。</p>
<p>**<br>**</p>
<p><strong>3</strong></p>
<p><strong>指标配置的原理</strong></p>
<p>指标配置是一个建立在数仓中间层模型结构上，进行参数配置化的指标开发系统。可按照一定的计算规则进行自由的拼装，实现自定义指标的功能。</p>
<p>3.1</p>
<p><strong>基于埋点事件进行指标配置</strong></p>
<p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片"></p>
<p>这类指标配置依赖埋点管理平台中的埋点元信息。例如我们要配置一个点击注册按钮人均次数，只需要选中名为 “点击注册按钮” 的埋点事件名称，聚合方式选择 “人均次数”，即可完成指标的配置。</p>
<p>这种配置方式的实现原理，笔者会通过下面一个简单的例子给大家介绍，同时基于这种思想后面会引申出另一种指标配置方式。</p>
<p>在数仓中假设我们的埋点数据存储下面的中间层 event_data_df 中。</p>
<p>我们通过以下 hivesql 可以生产出点击注册按钮人均次数的指标数据。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">	`<span class="keyword">day</span>`,</span><br><span class="line">	<span class="built_in">count</span>(<span class="operator">*</span>) <span class="operator">/</span> <span class="built_in">count</span>( <span class="keyword">DISTINCT</span> uid ) <span class="keyword">AS</span> index_value </span><br><span class="line"><span class="keyword">FROM</span></span><br><span class="line">	event_data_df </span><br><span class="line"><span class="keyword">WHERE</span></span><br><span class="line">	event_id <span class="operator">=</span> <span class="string">&#x27;click_purchase&#x27;</span> </span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span></span><br><span class="line">	`<span class="keyword">day</span>`</span><br></pre></td></tr></table></figure>



<p>其中 click_purchase 是我们配置的事件名称 “点击注册按钮” 对应的事件 ID，而count(*)&#x2F;count(distinct uid) 对应 “人均次数” 的聚合方式。</p>
<p>不难看出我们配置的埋点信息，都会拼装成一定的 sql 提交到计算平台进行计算。计算平台通过计算引擎、任务调度将指标结果计算出来，并同步至 AB 测试平台进行展示。如果要对埋点事件参数过滤或结果展示维度的配置，大家可以思考下会对应什么样的计算 sql，这里笔者就不详细介绍了。</p>
<p>3.2</p>
<p><strong>基于数仓中间层进行指标配置</strong></p>
<p>在介绍之前，先跟大家聊一下模板化思维的方式。</p>
<p>生活中大家可能遇到过这种场景，用微波炉加热食物。时间太短，可能不热。温度太高，食物过硬。假设我们给微波炉设定个程序，第一步先用高火加热，第二步再用中火加热，一共加热 5 分钟。加热鸡腿时第一步 4 分钟，第二步 1 分钟，防止高火时间短导致不热；加热馒头时，第一步 1 分钟，第二步 4 分钟防止高火导致食物过硬。</p>
<p>这个程序我们称为模板，每一步的加热时间是模板的参数，由我们加入的食物决定的。食物就是我们这个模板的配置项，决定模板参数的具体取值。</p>
<p>同样的思想，指标生产的计算 sql 中，笔者设定了以下几个参数，通过配置项进行指标的生产。</p>
<p>指标的数仓中间层，对应事件配置中的 event_data_df；</p>
<p>过滤条件，对应事件配置中的 event_id&#x3D;’click_purchase’；</p>
<p>聚合方式，对应事件配置中的 count(*)&#x2F;count(distinct uid)。</p>
<p><img src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg==" alt="图片"></p>
<p>其中比较有难度的是对聚合方式的抽象，大家可以考虑下自己做的指标中，分别有哪些聚合方式。</p>
<p><strong>4</strong></p>
<p><strong>指标配置可以带来什么</strong></p>
<p>指标配置的核心思想，是建立一站式的指标可视化开发服务，覆盖了从指标定义、指标开发、任务调度、指标发布、指标应用的全过程。</p>
<p>指标配置应用在 AB 测试平台上，主要有以下优势：</p>
<p>1、指标计算逻辑清晰</p>
<p>每个指标基本信息、中间层模型、调度信息平台可查，数据血缘清晰明了。</p>
<p>2、指标口径和需求一致</p>
<p>AB 测试平台、BI 平台等数据平台展示的指标都是配置化生产出来的，相同指标口径和用户需求一致，不会出现跨平台的差异。</p>
<p>3、相同的指标需求，配置一次就够</p>
<p>配置的指标在 AB 测试平台上或者其他平台都可以使用，不需要重复加工生产。</p>
<p><strong>5</strong></p>
<p><strong>企业内部和商业化 AB 测试平台的差异</strong></p>
<p>根据笔者的调研发现，企业内部 AB 测试平台和商业化的 AB 测试平台，在指标配置功能建设上存在比较大的差异。</p>
<p>1、数据来源的差异</p>
<p>商业化 AB 测试平台会和埋点行为分析等平台形成产品合力，能够分析的数据大都是埋点 SDK 采集的用户行为数据。</p>
<p>而企业内部构建的数仓不仅包括用户行为数据，还有服务器日志、外部数据等。</p>
<p>2、产品目标人群的差异</p>
<p>商业化 AB 测试平台面向 B 端公司中负责数据分析的角色，且 B 端公司无法对数据源进行二次开发。</p>
<p>企业内部 AB 测试平台角色分工明确，数据开发负责指标生产，产品运营负责获取数据进行分析。</p>
<p>综上所述，企业内部 AB 测试平台指标配置会考虑提升数据开发指标生产效率，故而会优先选择基于指标数仓中间层配置指标的方式。而商业化 AB 测试平台，面向 B 端用户，需要降低配置门槛，会选择基于埋点事件配置指标的方式。</p>
<p>**<br>**</p>
<p><strong>6</strong></p>
<p><strong>结尾</strong></p>
<p>笔者所在公司的指标配置是一个独立的平台，在设计内部 AB 测试平台指标配置能力时，我们直接复用了指标管理平台的能力。在指标统计口径上做到了完全复用，保障了指标口径的统一。AB 测试平台负责在实验统计模型方面沉淀数据应用，如常见的实验样本量的计算、实验指标的显著性和置信区间的计算等。期待下期给大家分享这些统计模型的实现方式。</p>
]]></content>
      <tags>
        <tag>数据中台</tag>
      </tags>
  </entry>
</search>
